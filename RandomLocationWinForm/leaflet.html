<!doctype html><html><head>
<meta charset="utf-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<style>html,body,#map{height:100%;margin:0}</style>
</head><body>
<div id="map"></div>
<script>
    const map = L.map('map').setView([36.5, 127.8], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    let currentMarker = null;

    // C#에서 호출할 함수들
    window.addMarker = (lat, lon, text) =>
        L.marker([lat, lon]).addTo(map).bindPopup(text || '');

    window.updateMarker = (lat, lon, text) => {
        if (currentMarker) {
            map.removeLayer(currentMarker); // 기존 마커 제거
        }
        currentMarker = L.marker([lat, lon]).addTo(map);
        if (text) currentMarker.bindPopup(text);
    }

    window.addGeoJson = (g) => L.geoJSON(g).addTo(map);
</script>
</body></html>